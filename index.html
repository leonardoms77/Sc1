<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Simulador PETR4</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #121212;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0;
      padding: 10px;
    }

    h2 {
      margin: 10px;
    }

    .container {
      display: flex;
      flex-direction: row;
      justify-content: center;
      gap: 20px;
      width: 100%;
      max-width: 900px;
      margin-top: 20px;
    }

    .book {
      background: #1e1e1e;
      padding: 10px;
      border-radius: 10px;
      flex: 1;
      max-height: 400px;
      overflow-y: auto;
    }

    .book h3 {
      text-align: center;
      margin-top: 0;
    }

    .order-row {
      display: flex;
      justify-content: space-between;
      padding: 5px 0;
      border-bottom: 1px solid #333;
    }

    .order-row span {
      width: 33%;
      text-align: center;
    }

    .buy { background-color: #002b36; }
    .sell { background-color: #4b0000; }

    .controls {
      margin-top: 20px;
    }

    button {
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      background: #007acc;
      color: white;
      font-weight: bold;
      cursor: pointer;
      margin-right: 10px;
    }
  </style>
</head>
<body>

  <h2>Simulador de Book de Ofertas - PETR4</h2>

  <div class="controls">
    <button onclick="girarTela()">Girar Tela</button>
  </div>

  <div class="container">
    <div class="book" id="bookCompra">
      <h3>Book de Compra</h3>
    </div>
    <div class="book" id="bookVenda">
      <h3>Book de Venda</h3>
    </div>
  </div>

  <script>
    let ciclo = 0;

    // Função que simula o Bradesco lançando ordens a cada segundo
    function simularOrdemBradesco() {
      const tipo = Math.random() > 0.5 ? 'compra' : 'venda';
      const quantidade = Math.floor(Math.random() * 500 + 100) * 100;
      const precoBase = 32.00;
      const preco = (precoBase + (Math.random() - 0.5)).toFixed(2);

      const order = {
        banco: 'Bradesco',
        quantidade: quantidade,
        preco: parseFloat(preco)
      };

      adicionarOrdem(tipo, order);
    }

    // Adiciona ordem no book
    function adicionarOrdem(tipo, ordem) {
      const container = tipo === 'compra' ? document.getElementById("bookCompra") : document.getElementById("bookVenda");

      const linha = document.createElement("div");
      linha.classList.add("order-row");
      linha.classList.add(tipo === 'compra' ? "buy" : "sell");

      const banco = document.createElement("span");
      banco.textContent = ordem.banco;
      const qtd = document.createElement("span");
      qtd.textContent = ordem.quantidade.toLocaleString();
      const preco = document.createElement("span");
      preco.textContent = ordem.preco.toFixed(2).replace('.', ',');

      linha.appendChild(banco);
      linha.appendChild(qtd);
      linha.appendChild(preco);

      container.appendChild(linha);

      // Limita para no máximo 20 linhas
      while (container.children.length > 21) {
        container.removeChild(container.children[1]);
      }
    }

    // Gira a tela do celular
    function girarTela() {
      if (screen.orientation && screen.orientation.lock) {
        const nova = screen.orientation.type.startsWith("portrait") ? "landscape" : "portrait";
        screen.orientation.lock(nova).catch(console.error);
      } else {
        alert("Seu navegador não suporta o bloqueio de rotação.");
      }
    }

    // Timer global de 1 segundo
    setInterval(() => {
      ciclo++;
      simularOrdemBradesco();
    }, 1000);
  </script>
</body>
</html>
