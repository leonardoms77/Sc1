<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Simulador de Book de PETR4</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f3f3f3;
      margin: 0;
      padding: 0;
    }

    #painel-topo {
      background-color: #222;
      color: #fff;
      padding: 10px;
      text-align: center;
      font-size: 20px;
    }

    #painel-container {
      display: flex;
      flex-wrap: wrap;
      padding: 10px;
    }

    #book-compra, #book-venda {
      width: 45%;
      max-height: 400px;
      overflow-y: auto;
      background-color: #fff;
      margin: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px;
    }

    #book-compra h3, #book-venda h3 {
      margin-top: 0;
    }

    .ordem {
      display: flex;
      justify-content: space-between;
      padding: 4px;
      font-family: monospace;
    }

    .compra {
      background-color: #d0f0d0;
    }

    .venda {
      background-color: #f0d0d0;
    }

    .executando {
      background-color: #ffee00;
    }

    #painel-capitalizacao {
      width: 90%;
      background-color: #e9e9ff;
      padding: 10px;
      margin: 10px auto;
      border-radius: 5px;
      font-family: monospace;
    }
  </style>
</head>
<body>

  <div id="painel-topo">Simulador PETR4 - Book de Ofertas</div>

  <div id="painel-capitalizacao">
    <strong>Capitalização da Petrobras</strong><br>
    Ações totais do IPO: <span id="acoes-totais">8.000.000.000</span><br>
    Ações vendidas: <span id="acoes-vendidas">0</span><br>
    Valor arrecadado: R$ <span id="valor-arrecadado">0,00</span>
  </div>

  <div id="painel-container">
    <div id="book-compra">
      <h3>Book de Compra</h3>
      <div id="lista-compra"></div>
    </div>

    <div id="book-venda">
      <h3>Book de Venda</h3>
      <div id="lista-venda"></div>
    </div>
  </div>

  <!-- Scripts aqui depois -->
<script>
  let ciclo = 0;
  const ciclosTotais = 420;
  let intervalo = null;

  function iniciarSimulacao() {
    if (intervalo) return;

    intervalo = setInterval(() => {
      ciclo++;

      document.title = `Ciclo ${ciclo} / ${ciclosTotais}`;

      // Aqui você pode chamar os scripts dos players e do Bradesco
      executarCiclo();

      if (ciclo >= ciclosTotais) {
        clearInterval(intervalo);
        intervalo = null;
        console.log("Fim do pregão!");
      }
    }, 1000); // 1 segundo por ciclo
  }

  function pausarSimulacao() {
    clearInterval(intervalo);
    intervalo = null;
  }

  function executarCiclo() {
    // Aqui será onde os bots colocam ordens
    if (typeof cicloExecutado === "function") {
      cicloExecutado(ciclo); // função que você define fora, onde quiser
    }
  }

  // Botões de controle
  const btns = document.createElement('div');
  btns.style.textAlign = "center";
  btns.style.marginTop = "10px";
  btns.innerHTML = `
    <button onclick="iniciarSimulacao()">Iniciar</button>
    <button onclick="pausarSimulacao()">Pausar</button>
  `;
  document.body.appendChild(btns);
</script>

<script>
  function cicloExecutado(ciclo) {
    // Exemplo: Bradesco lança ordens de venda
    bradescoVende();
    botsColocamOrdens();
    executarBook();
  }
</script>
  
</body>
</html>
